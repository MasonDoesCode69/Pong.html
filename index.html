<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neon Game Hub vs. Mark</title>
    <style>
        body { background: #050505; color: #fff; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
        canvas { background: transparent; display: none; border: 4px solid #0ff; box-shadow: 0 0 20px #0ff; }
        #menu { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        .btn { padding: 15px 30px; font-size: 20px; background: transparent; color: #0ff; border: 2px solid #0ff; cursor: pointer; text-shadow: 0 0 5px #0ff; box-shadow: 0 0 10px #0ff; width: 300px; transition: 0.3s; }
        .btn:hover { background: #0ff; color: #000; }
        #ui { position: absolute; top: 20px; width: 800px; display: none; justify-content: space-between; font-size: 24px; color: #0ff; text-shadow: 0 0 10px #0ff; }
        #dialogue-box { margin-top: 20px; height: 40px; text-align: center; color: #f0f; font-weight: bold; width: 800px; text-shadow: 0 0 10px #f0f; display: none; }
        #back-btn { position: absolute; bottom: 20px; display: none; }
    </style>
</head>
<body>

    <div id="menu">
        <h1 style="color: #0ff; text-shadow: 0 0 20px #0ff;">SELECT YOUR DEFEAT</h1>
        <button class="btn" onclick="startLevel('pong')">NEON PONG</button>
        <button class="btn" onclick="startLevel('rocket')">2D ROCKET LEAGUE</button>
        <button class="btn" onclick="startLevel('table')">TABLE TOP TENNIS</button>
        <button class="btn" onclick="startLevel('snake')">NEON SNAKE</button>
    </div>

    <div id="ui"><span id="pScore">0</span> <span id="gameTitle">GAME</span> <span id="mScore">0</span></div>
    <canvas id="gameCanvas" width="800" height="500"></canvas>
    <div id="dialogue-box">"Mark is initializing..."</div>
    <button id="back-btn" class="btn" onclick="location.reload()">BACK TO MENU</button>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const menu = document.getElementById("menu");
    const ui = document.getElementById("ui");
    const dialogue = document.getElementById("dialogue-box");
    const backBtn = document.getElementById("back-btn");

    let currentGame = null;
    let score = { p: 0, m: 0 };
    const keys = {};
    window.addEventListener("keydown", e => keys[e.key] = true);
    window.addEventListener("keyup", e => keys[e.key] = false);

    const markLines = ["Is that your best?", "Calculating your failure...", "Error 404: Your skill not found.", "I'm bored.", "Nice try, meatbag."];

    function startLevel(type) {
        menu.style.display = "none";
        canvas.style.display = "block";
        ui.style.display = "flex";
        dialogue.style.display = "block";
        backBtn.style.display = "block";
        currentGame = type;
        document.getElementById("gameTitle").innerText = type.toUpperCase();
        initGame(type);
        gameLoop();
    }

    let ball, player, mark;
    function initGame(type) {
        if (type === 'pong' || type === 'table') {
            player = { x: 20, y: 200, w: 10, h: 80, speed: 7 };
            mark = { x: 770, y: 200, w: 10, h: 80, speed: 4 };
            ball = { x: 400, y: 250, dx: 5, dy: 5, r: 8, speed: 5 };
        } else if (type === 'rocket') {
            player = { x: 100, y: 250, r: 20, angle: 0, speed: 0, color: "#0ff" };
            mark = { x: 700, y: 250, r: 20, angle: Math.PI, speed: 0, color: "#f0f" };
            ball = { x: 400, y: 250, dx: 0, dy: 0, r: 25, friction: 0.98 };
        } else if (type === 'snake') {
            player = { body: [{x: 10, y: 10}], dir: {x: 1, y: 0}, nextDir: {x: 1, y: 0} };
            ball = { x: 15, y: 15 }; // Food
        }
    }

    function gameLoop() {
        if (!currentGame) return;
        ctx.fillStyle = "rgba(5, 5, 5, 0.2)"; // Trail effect
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        if (currentGame === 'pong') playPong();
        if (currentGame === 'rocket') playRocket();
        if (currentGame === 'snake') playSnake();
        if (currentGame === 'table') playTable();

        requestAnimationFrame(gameLoop);
    }

    // --- GAME LOGIC: PONG & TABLE ---
    function playPong() {
        // Player
        if ((keys["ArrowUp"] || keys["w"]) && player.y > 0) player.y -= player.speed;
        if ((keys["ArrowDown"] || keys["s"]) && player.y < canvas.height - player.h) player.y += player.speed;
        
        // Mark AI
        let target = ball.y - mark.h/2;
        mark.y += (target - mark.y) * 0.08;

        moveBall();
        drawRect(player.x, player.y, player.w, player.h, "#0ff");
        drawRect(mark.x, mark.y, mark.w, mark.h, "#f0f");
        drawCircle(ball.x, ball.y, ball.r, "#fff");
    }

    function playTable() {
        // Similar to pong but physics are "lighter" and paddles are smaller
        player.h = 40; mark.h = 40;
        playPong();
    }

    // --- GAME LOGIC: ROCKET LEAGUE ---
    function playRocket() {
        // Car Physics (Simplified)
        if (keys["ArrowLeft"]) player.angle -= 0.08;
        if (keys["ArrowRight"]) player.angle += 0.08;
        if (keys["ArrowUp"]) player.speed = 4; else player.speed *= 0.95;

        player.x += Math.cos(player.angle) * player.speed;
        player.y += Math.sin(player.angle) * player.speed;

        // Mark AI Car
        let angleToBall = Math.atan2(ball.y - mark.y, ball.x - mark.x);
        mark.angle += (angleToBall - mark.angle) * 0.05;
        mark.x += Math.cos(mark.angle) * 3;
        mark.y += Math.sin(mark.angle) * 3;

        // Ball Physics
        ball.x += ball.dx; ball.y += ball.dy;
        ball.dx *= ball.friction; ball.dy *= ball.friction;

        // Simple Collision
        checkCarBall(player); checkCarBall(mark);
        if (ball.x < 0 || ball.x > canvas.width) { 
            if (ball.y > 150 && ball.y < 350) { scoreGoal(); } 
            else { ball.dx *= -1; }
        }
        if (ball.y < 0 || ball.y > canvas.height) ball.dy *= -1;

        drawCircle(player.x, player.y, player.r, "#0ff");
        drawCircle(mark.x, mark.y, mark.r, "#f0f");
        drawCircle(ball.x, ball.y, ball.r, "#fff");
        // Draw Goals
        drawRect(0, 150, 5, 200, "#0ff");
        drawRect(795, 150, 5, 200, "#f0f");
    }

    // --- UTILS ---
    function drawRect(x,y,w,h,c) { ctx.shadowBlur=15; ctx.shadowColor=c; ctx.fillStyle=c; ctx.fillRect(x,y,w,h); }
    function drawCircle(x,y,r,c) { ctx.shadowBlur=15; ctx.shadowColor=c; ctx.fillStyle=c; ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2); ctx.fill(); }

    function moveBall() {
        ball.x += ball.dx; ball.y += ball.dy;
        if (ball.y < 0 || ball.y > canvas.height) ball.dy *= -1;
        if (checkHit(ball, player) || checkHit(ball, mark)) ball.dx *= -1.1;
        if (ball.x < 0) { score.m++; resetPos(); }
        if (ball.x > canvas.width) { score.p++; resetPos(); }
        updateScore();
    }

    function checkHit(b, p) { return b.x > p.x && b.x < p.x+p.w && b.y > p.y && b.y < p.y+p.h; }
    function checkCarBall(c) {
        let dist = Math.hypot(c.x - ball.x, c.y - ball.y);
        if (dist < c.r + ball.r) {
            ball.dx = (ball.x - c.x) * 0.2;
            ball.dy = (ball.y - c.y) * 0.2;
        }
    }

    function updateScore() {
        document.getElementById("pScore").innerText = score.p;
        document.getElementById("mScore").innerText = score.m;
    }

    function scoreGoal() { score.p++; resetPos(); updateScore(); dialogue.innerText = `Mark: "${markLines[Math.floor(Math.random()*markLines.length)]}"`; }
    function resetPos() { initGame(currentGame); }

    // --- SNAKE (Simplified Neon) ---
    let tick = 0;
    function playSnake() {
        if (tick++ % 10 !== 0) { drawSnake(); return; }
        if (keys["ArrowUp"] && player.dir.y === 0) player.nextDir = {x:0, y:-1};
        if (keys["ArrowDown"] && player.dir.y === 0) player.nextDir = {x:0, y:1};
        if (keys["ArrowLeft"] && player.dir.x === 0) player.nextDir = {x:-1, y:0};
        if (keys["ArrowRight"] && player.dir.x === 0) player.nextDir = {x:1, y:0};
        
        player.dir = player.nextDir;
        let head = {x: player.body[0].x + player.dir.x, y: player.body[0].y + player.dir.y};
        player.body.unshift(head);
        if (head.x === ball.x && head.y === ball.y) {
            score.p++; updateScore();
            ball = {x: Math.floor(Math.random()*39), y: Math.floor(Math.random()*24)};
        } else { player.body.pop(); }
        drawSnake();
    }
    function drawSnake() {
        player.body.forEach(b => drawRect(b.x*20, b.y*20, 18, 18, "#0ff"));
        drawRect(ball.x*20, ball.y*20, 18, 18, "#f0f");
    }

</script>
</body>
</html>
